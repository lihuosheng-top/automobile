<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
	<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
	<title>分类页面</title>
	<style>
		* {box-sizing: border-box}
		body {font-family: "Lato", sans-serif; background:#fff;}

		/* Style the tab */
		div.tab {
			float: left;
			background-color: #f4f4f4;
			width: 25%;
		}

		/* Style the buttons inside the tab */
		div.tab button {
			display: block;
			background-color: inherit;
			width: 100%;
			text-align:center;
			border: none;
			outline: none;
			cursor: pointer;
			transition: 0.3s;
			font-size: 12px;
			font-weight:400;
			padding:15px 0;
			height:auto;
			line-height:normal;
			color:#666;
		}

		/* Change background color of buttons on hover */
		div.tab button:hover {
			background-color: #fff;
			border-radius:0;
			color:#f23030;
		}

		/* Create an active/current "tab button" class */
		div.tab button.active {
			background-color: #fff;
			border-radius:0;
			color:#f23030;
		}

		/* Style the tab content */
		.tabcontent {
			float: left;
			width: 75%;
			border-left: none;
		}
		.class-ui-ad {
			margin:10px 10px 0px 10px;

		}
		.class-ui-ad a img{
			width:100%;
			height:100%;
			display:block;
			border:none;
		}
		.class-ui-title{
			text-align:center;
			padding:14px 0;
		}
		.class-ui-title h3{
			display: inline-block;
			position: relative;
			height: 12px;
			line-height: 12px;
			font-size: 12px;
			vertical-align: middle;
			padding: 0 .92rem;
			color:#f23030;
		}
		.class-ui-title h3:before {
			position: absolute;
			top: 5px;
			content: '';
			width: .72rem;
			height: 1px;
			background: #ccc;
			left: 0;
		}
		.class-ui-title h3:after{
			position: absolute;
			top: 5px;
			content: '';
			width: .72rem;
			height: 1px;
			background: #ccc;
			right: 0;
		}
		.class-ui-text .aui-col-xs-4 a img{
			width: 2.6rem;
			height: 2.6rem;
			margin:0 auto;
		}
		.class-ui-text .aui-col-xs-4 a p{
			text-align:center;
			color:#999;
			font-size:12px;
		}
	</style>
	<link rel="icon" type="image/x-icon" href="__STATIC__/index/favicon.ico">
	<link rel="stylesheet" type="text/css" href="__STATIC__/index/css/aui.css" />

</head>
<body style="background:#fff">
<header class="aui-bar aui-bar-nav">
	<a class="aui-pull-left aui-btn" onclick="javascript:history.back(-1);">
		<span class="aui-iconfont aui-icon-left"></span>
	</a>
	<div class="aui-title" style="left:2rem; right: 2rem;">
		<div class="aui-searchbar" id="search">
			<div class="aui-searchbar-input aui-border-radius">
				<i class="aui-iconfont aui-icon-search"></i>
				<input type="search" placeholder="超级购物日" id="search-input">
				<div class="aui-searchbar-clear-btn">
					<i class="aui-iconfont aui-icon-close"></i>
				</div>
			</div>
			<div class="aui-searchbar-btn" tapmode="">取消</div>
		</div>
	</div>
	<a class="aui-pull-right aui-btn" href="{:url('index/chat/chat')}">
		<span class="aui-iconfont aui-icon-comment"></span>
	</a>
</header>

<div class="tab">
	<button class="tablinks" onclick="openCity(event, 'tab1')" id="defaultOpen">热门推荐</button>
	{volist name="category" id="value"}
	<button class="tablinks" value="{$value.id}" onclick="openCity(event, 'tab{$value.id}')">{$value.name}</button>
	{/volist}
</div>
<div id="tab1" class="tabcontent" style="text-align: center;">
	<div class="class-ui-ad">

		<a href="javascript:;"><img src="__STATIC__/index/image/class-1.jpg" alt=""></a>

	</div>
	<div class="class-ui-title">
		<h3>专场推荐</h3>
	</div>
	<div class="aui-row aui-row-padded class-ui-text">

	</div>
</div>
<footer class="aui-bar aui-bar-tab aui-bar-tab-cl aui-border-t" id="footer">
	<a href="{:url('index/index/index')}" class="aui-bar-tab-item " tapmode>
		<i class="aui-iconfont aui-icon-home"></i>
		<div class="aui-bar-tab-label">首页</div>
	</a>
	<a class="aui-bar-tab-item" tapmode href="{:url('index/Classify/index')}">
		<i class="aui-iconfont aui-icon-menu" style="color:#f34347;"></i>
		<div class="aui-bar-tab-label" style="color:#f34347;">分类</div>
	</a>
	<a class="aui-bar-tab-item" tapmode href="{:url('index/Share/share_index')}">
		<i class="aui-iconfont aui-icon-camera"></i>
		<div class="aui-bar-tab-label">晒单</div>
	</a>
	<a class="aui-bar-tab-item" tapmode href="{:url('index/Shopping/index')}">
		<i class="aui-iconfont aui-icon-cart"></i>
		<div class="aui-bar-tab-label">购物车</div>
	</a>
	<a href="{:url('index/Member/index')}" class="aui-bar-tab-item" id="my" tapmode>
		<i class="aui-iconfont aui-icon-my"></i>
		<div class="aui-bar-tab-label">我的</div>
	</a>
</footer>

<script type="text/javascript" src="__STATIC__/admin/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
		tabcontent = document.getElementsByClassName("tabcontent");

        // for (i = 0; i < tabcontent.length; i++) {
        //     tabcontent[i].style.display = "none";
		// }
		// 当前点击的button 添加active类名
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        // document.getElementById(cityName).style.display = "block";
		evt.currentTarget.className += " active";
    }

    // 触发 id="defaultOpen" click 事件
	document.getElementById("defaultOpen").click();
</script>
<script>
    $(".tablinks").click(function () {
        var id = $(this).val();
        $.ajax({
            type:"POST",
            url:"{:url('index/Classify/show')}",
            data:{
				"id": id
			},
            async:false,
            timeout:5000,
            dataType:"json",
            success:function (data) {
                 console.log(data);
				var len = data.data.length;
				$('.class-ui-text').html("");
				for(var i = 0; i < len; i++){
					$('.class-ui-text').append('<div class="aui-col-xs-4">\
											<a href="{:url("index/Goods/index")}" id="a_'+data.data[i].id+'">\
												<img src="__TYPE__/'+data.data[i].type_images+'" id="img_'+data.data[i].id+'">\
												<p>'+data.data[i].name+'</p>\
											</a>\
										</div>')
				}
				// 用户点击 商品传值id
				$('#tab1 .aui-col-xs-4 img').click(function(){
						var img_id = $(this)[0].id.split('_')[1];
						console.log(img_id);
						$.ajax({
							url:"{:url('index/Goods/ajax_id')}",
							dataType: 'json',
							type: 'POST',
							data:{
								"id": img_id
							},
							success: function(data){
								// console.log(data)
							},
							error: function(){
								console.log('错误')
							}
						})
					})
            },
            error:function () {
                console.log("错误");
            }
        })
	})
</script>
<script>
    (function(){
        $.ajax({
            type:"POST",
            url:"{:url('index/Classify/index')}",
            data:{
                "id": 1
            },
            async:false,
            timeout:5000,
            dataType:"json",
            success:function (data) {
                console.log(data)
            },
            error:function () {
                console.log("错误");
            }
        })
    })()
</script>
</body>
</html>