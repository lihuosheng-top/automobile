<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- 屏幕适配 -->
    <script src="__STATIC__/index/js/adaptation.js"></script>
    <link rel="stylesheet" href="__STATIC__/index/css/common.css">
    <link rel="stylesheet" href="__STATIC__/index/css/index/index.css">
    <link rel="stylesheet" href="__STATIC__/index/css/plugin/swiper-4.3.5.min.css">
    <link rel="stylesheet" href="__STATIC__/index/js/plugin/threecity/css/scs.min.css">
    <style>
        body {
            padding-top: constant(safe-area-inset-top);
            padding-left: constant(safe-area-inset-left);
            padding-right: constant(safe-area-inset-right);
            padding-bottom: constant(safe-area-inset-bottom);
        }
    </style>
    <title>首页</title>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <div class="map">
                <span class="curr_city" id="space-input">定位中</span>
                <i class="spr icon_location"></i>
            </div> 
            <div class="search">
                <i class="spr icon_search"></i>
                <input type="text" id="search" placeholder="输入你要搜索的内容">
            </div>
            <div class="message">
                <a href="information_index" class="spr icon_message"></a>
            </div>
        </div>
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <!-- <div class="swiper-slide">
                    <a href="javascript:;">
                        <img src="__STATIC__/index/image/banner1.png">
                    </a>
                </div> -->
            </div>
            <!-- 如果需要分页器 -->
            <div class="swiper-pagination"></div>
        </div>
        <div class="classify_service">
            <div class="add_mycar">
                <a href="javascript:;">
                    <div class="txt-div">
                        <p>添加我的爱车</p>
                        <span>想要更多服务吗？快去添加爱车吧</span>
                    </div>
                    <i class="spr icon_add"></i>
                </a>
            </div>
            <ul class="service-container">
                <li>
                    <a href="service_type">
                        <i class="spr order"></i>
                        <span>预约服务</span>
                    </a>
                </li>
                <li>
                    <a href="parts_index">
                        <i class="spr parts"></i>
                        <span>配件商城</span>
                    </a>
                </li>
                <li>
                    <a href="rescue_index">
                        <i class="spr daily"></i>
                        <span>紧急救援</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr agency"></i>
                        <span>代办业务</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr lease"></i>
                        <span>车辆租赁</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr mortgage"></i>
                        <span>汽车抵押</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr insurance"></i>
                        <span>车辆保险</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr designated_driving"></i>
                        <span>寻找代驾</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr used_car"></i>
                        <span>二手车</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr assess"></i>
                        <span>车辆评估</span>
                    </a>
                </li>
                <li>
                    <a href="about_index">
                        <i class="spr more"></i>
                        <span>更多服务</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="banner">
            <!-- <a href="javascript:;">
                <img src="__STATIC__/index/image/banner2.jpg">
            </a> -->
        </div>
        <!-- 活动商家 -->
        <div class="hot_recommend">
            <p class="subtitle">活动商家</p>
            <div class="recommend_goods">
                <!-- <div class="recommend_top">
                    <a href="javascript:;">
                        <img src="__STATIC__/index/image/00.png">
                    </a>
                    <a href="javascript:;">
                        <img src="__STATIC__/index/image/00.png">
                    </a>
                </div>
                <div class="recommend_bottom">
                    <div class="recommend_bottom_left">
                        <a href="javascript:;">
                            <img src="__STATIC__/index/image/01.png">
                        </a>
                    </div>
                    <div class="recommend_bottom_right">
                        <div class="recommend_bottom_right_one">
                            <a href="javascript:;">
                                <img src="__STATIC__/index/image/00.png">
                            </a>
                        </div>
                        <div class="recommend_bottom_right_two">
                            <div class="recommend_bottom_right_three">
                                <a href="javascript:;">
                                    <img src="__STATIC__/index/image/00.png">
                                </a>
                            </div>
                            <div class="recommend_bottom_right_four">
                                <a href="javascript:;">
                                    <img src="__STATIC__/index/image/00.png">
                                </a>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
        <!-- 周边店铺 -->
        <div class="hot_shop">
            <p class="subtitle">周边店铺
                <span class="refresh-icon"></span>
            </p>
            <ul class="hot-ul">
                <!-- <li class="hot-item">
                    <div class="hot-headimg">
                        <img src="__STATIC__/index/image/15.jpg">
                    </div>
                    <div class="hotshop-info">
                        <p class="hot-name">大众汽车维修保养店</p>
                        <div class="star-time"> -->
                            <!-- star2=二星 以此类推 -->
                            <!-- <i class="spr star1"></i>
                            <span>营业时间：00:00-24:00</span>
                        </div>
                        <p class="txt-hid-two hotshop-detail">详细信息详细信息详细信息详细信息息详细信息详细信息详细信息详细信息详</p>
                    </div>
                </li> -->
            </ul>
        </div>
        <!-- footer 样式分离到common.css -->
        <div class="footer padding-bottom">
            <ul>
                <li class="home">
                    <a href="{:url('index/index/index')}">
                        <i class="spr icon_home"></i>
                        <span class="text_home active">首页</span>
                    </a>
                </li>
                <li class="classify">
                    <a href="classify_index">
                        <i class="spr icon_classify"></i>
                        <span class="text_classify">分类</span>
                    </a>
                </li>
                <li class="cart">
                    <a href="cart_index">
                        <i class="spr icon_cart"></i>
                        <span class="text_cart">购物车</span>
                    </a>
                </li>
                <li class="my">
                    <a href="javascript:;">
                        <i class="spr icon_my"></i>
                        <span class="text_my">我的</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- 添加车 -->
    <div class="select-car" style="display:none;">
        <header class="add-mycar">
            <a href="javascript:;" class="spr add-back"></a>
            <h3 class="title-txt">添加我的爱车</h3>
        </header>
        <div class="cont">
            <div>
                <div class="car-search">
                    <i class="spr icon_search"></i>
                    <input type="text" name="search_input" class="search-input" placeholder="输入你要搜索的品牌">
                </div>
                <div class="hot-brand">
                    <div class="hot-brand-title">
                        热门品牌：
                    </div>
                    <ul class="hot-brand-ul">
                        <!-- <li class="hot-brand-li">
                            <img src="__STATIC__/index/image/bmw.png">
                            <span>宝马</span>
                        </li> -->
                    </ul>
                </div>
                <div id="letter" class="letter"></div>
                <div class="sort_box">
                    <!-- <div class="sort_list">
                        <div class="num_logo">
                            <img src="__STATIC__/index/image/bmw.png">
                        </div>
                        <div class="num_name">标志</div>
                    </div> -->
                </div>
                <div class="initials">
                    <ul>
                        <li><img src="__STATIC__/index/image/icon2.png"></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- 选择车系 -->
    <div class="car-series" style="display:none;">
        <header class="series-header">
            <a href="javascript:;" class="spr series-back"></a>
            <h3 class="title-txt">选择车系</h3>
        </header>
        <div class="car-brand"></div>
        <div class="series-list">
            <!-- <div class="series-txt"></div> -->
        </div>
    </div>
    <!-- 选择排量 -->
    <div class="motorcycle-type" style="display:none;">
        <header class="type-header">
            <a href="javascript:;" class="spr type-back"></a>
            <h3 class="title-txt">选择排量</h3>
        </header>
        <div class="type-list">
            <!-- <div class="type-txt">SUV</div> -->
        </div>
    </div>
    <!-- 选择年产 -->
    <div class="car-year" style="display:none;">
        <header class="year-header">
            <a href="javascript:;" class="spr year-back"></a>
            <h3 class="title-txt">选择年产</h3>
        </header>
        <div class="year-list">
            <!-- <div class="year-txt">2018年款</div> -->
        </div>
    </div>
    
    <script src="__STATIC__/index/js/plugin/jquery.js"></script>
    <script src="__STATIC__/index/js/plugin/jquery.charfirst.pinyin.js"></script>
    <script src="__STATIC__/index/js/plugin/swiper-4.3.5.min.js"></script>
    <script src="https://webapi.amap.com/maps?v=1.4.10&key=210ef80cb0b8bcda1cb68f180bd5dab3"></script> 
    <script src="__STATIC__/index/js/plugin/layer.js"></script>
    <script src="__STATIC__/index/js/plugin/threecity/js/jquery.scs.min.js"></script>
    <script src="__STATIC__/index/js/plugin/threecity/js/CNAddrArr.min.js"></script>
    <script src="__STATIC__/index/js/index.js"></script>
    <script>
        $('.refresh-icon').click(function(){
            $(this).toggleClass('refresh-rotate');
            delCookie('threeAdress');
            setTimeout(function(){
                location.reload();
            }, 300)
        })
        // 调用安卓方法
        function callAndroid() {
            Android.getLocation();
        }
        // 判断机型
        (function(){
            var u = navigator.userAgent;
            if(u.indexOf('Android') > -1 || u.indexOf('Linux') > -1){
                // 第一次访问
                if(!getCookie('threeAdress')){
                    callAndroid();
                }else{
                    getAdvertisment(getCookie('threeAdress'));
                    document.getElementById('space-input').innerHTML = getCookie('district');
                    // 热门店铺
                    (function(){
                        return $.ajax({
                            url: 'index_shop',
                            type: 'POST',
                            dataType: 'JSON',
                        }).then(function(res){
                            console.log('周边店铺',res);
                            var distArr = [];
                            var dist = 0;
                            var lngLat = getCookie('lngLat').split(',');
                            if(res.status == 1){
                                $.each(res.data, function(idx, val){
                                    var markerLngLat = [parseFloat(val.longitude), parseFloat(val.latitude)];
                                    if(lngLat.length !== 0){
                                        dist = parseInt(AMap.GeometryUtil.distance(markerLngLat, lngLat));
                                    }
                                    if(dist <= 100000){
                                        distArr.push({
                                            id: val.id,
                                            dist: dist
                                        })
                                    }
                                })
                                // 距离排序
                                var sortDistArr = distArr.sort(sortNum);
                                (function(sortDistArr, res){
                                    var curPage = 0;
                                    // 页面滚动到底部 加载新的店铺
                                    $(document).ready(function() {
                                        $(window).scroll(function() {
                                            if ($(document).scrollTop() >= $(document).height() - $(window).height()) {
                                                // 滚动底部 页数+1
                                                ++curPage;
                                                var len = Math.ceil( sortDistArr.length / 10 );
                                                if(curPage < len){
                                                    renderPage(sortDistArr, res);
                                                }
                                            }
                                        });
                                    });
                                    function renderPage(sortDistArr, res){
                                        var str = '';
                                        var len = (sortDistArr.length - curPage * 10) >= 10 ? 10 : sortDistArr.length - curPage * 10;
                                        // 循环距离数组 一次10条
                                        for(var i = 0; i < len; i++){
                                            $.each(res.data, function(idx, ele){
                                                if(sortDistArr[i + curPage * 10].id == ele.id){
                                                    str += `<li class="hot-item" id="`+ele.id+`">
                                                                <div class="hot-headimg">
                                                                    <img src="uploads/`+ele.shop_images+`">
                                                                </div>
                                                                <div class="hotshop-info">
                                                                    <p class="hot-name">`+ele.shop_name+`</p>
                                                                    <div class="star-time">
                                                                        <i class="spr star1 `+
                                                                        (ele.shop_star > 0 && ele.shop_star < 1 ? '' : 
                                                                        (ele.shop_star >= 1 && ele.shop_star < 2 ? 'star2' :
                                                                        (ele.shop_star >= 2 && ele.shop_star < 3 ? 'star3' : 
                                                                        (ele.shop_star > 3 && ele.shop_star < 4 ? 'star4' : 'star5'))))+`"></i>
                                                                        <span>营业时间：`+ele.shop_time+`</span>
                                                                    </div>
                                                                    <p class="txt-hid-two hotshop-detail">约`+sortDistArr[i + curPage * 10].dist+`米  `+ele.shop_address.split(',').join('')+`</p>
                                                                </div>
                                                            </li>`
                                                }
                                            })
                                        }
                                        $('.hot-ul').append(str);
                                        $('.hot-item').click(function(){
                                            var id = $(this).attr('id');
                                            intoHotShop(id);
                                        })
                                    }
                                    renderPage(sortDistArr, res);
                                })(sortDistArr, res)
                            }
                        })
                    })()
                }
            }else if(u.indexOf('iPhone') > -1 || u.indexOf('ios') > -1){
                // 默认广告
                getAdvertisment('广东,深圳,福田区');
            }
        })()
        // 接收安卓回调内容
        function getAndroid(e) {
            // 定位成功
            if(e.errorCode === 0){
                var province = e.province;
                var city = e.city;
                var district = e.district;
                threeAdress = province+','+city+','+district;
                document.getElementById('space-input').innerHTML = district;
                getAdvertisment(threeAdress);
                var userLngLat = [e.lon, e.lat];
                // 存储地址 经纬度
                setCookie('threeAdress', threeAdress, 1000);
                setCookie('lngLat', userLngLat, 1000);
                setCookie('district', district, 1000);
                // 热门店铺
                (function(){
                    return $.ajax({
                        url: 'index_shop',
                        type: 'POST',
                        dataType: 'JSON',
                    }).then(function(res){
                        console.log('热门店铺',res);
                        var distArr = [];
                        var dist = 0;
                        if(res.status == 1){
                            $.each(res.data, function(idx, val){
                                var markerLngLat = [parseFloat(val.longitude), parseFloat(val.latitude)];
                                if(userLngLat.length !== 0){
                                    dist = parseInt(AMap.GeometryUtil.distance(markerLngLat, userLngLat));
                                }
                                if(dist <= 100000){
                                    distArr.push({
                                        id: val.id,
                                        dist: dist
                                    })
                                }
                            })
                            // 距离排序
                            var sortDistArr = distArr.sort(sortNum);
                            (function(sortDistArr, res){
                                var curPage = 0;
                                // 页面滚动到底部 加载新的店铺
                                $(document).ready(function() {
                                    $(window).scroll(function() {
                                        if ($(document).scrollTop() >= $(document).height() - $(window).height()) {
                                            // 滚动底部 页数+1
                                            ++curPage;
                                            var len = Math.ceil( sortDistArr.length / 10 );
                                            if(curPage < len){
                                                renderPage(sortDistArr, res);
                                            }
                                        }
                                    });
                                });
                                function renderPage(sortDistArr, res){
                                    var str = '';
                                    var len = (sortDistArr.length - curPage * 10) >= 10 ? 10 : sortDistArr.length - curPage * 10;
                                    // 循环距离数组 一次10条
                                    for(var i = 0; i < len; i++){
                                        $.each(res.data, function(idx, ele){
                                            if(sortDistArr[i + curPage * 10].id == ele.id){
                                                str += `<li class="hot-item" id="`+ele.id+`">
                                                            <div class="hot-headimg">
                                                                <img src="uploads/`+ele.shop_images+`">
                                                            </div>
                                                            <div class="hotshop-info">
                                                                <p class="hot-name">`+ele.shop_name+`</p>
                                                                <div class="star-time">
                                                                    <i class="spr star1 `+
                                                                    (ele.shop_star > 0 && ele.shop_star < 1 ? '' : 
                                                                    (ele.shop_star >= 1 && ele.shop_star < 2 ? 'star2' :
                                                                    (ele.shop_star >= 2 && ele.shop_star < 3 ? 'star3' : 
                                                                    (ele.shop_star > 3 && ele.shop_star < 4 ? 'star4' : 'star5'))))+`"></i>
                                                                    <span>营业时间：`+ele.shop_time+`</span>
                                                                </div>
                                                                <p class="txt-hid-two hotshop-detail">约`+sortDistArr[i + curPage * 10].dist+`米  `+ele.shop_address.split(',').join('')+`</p>
                                                            </div>
                                                        </li>`
                                            }
                                        })
                                    }
                                    $('.hot-ul').append(str);
                                    $('.hot-item').click(function(){
                                        var id = $(this).attr('id');
                                        intoHotShop(id);
                                    })
                                }
                                renderPage(sortDistArr, res);
                            })(sortDistArr, res)
                        }
                    })
                })()
            }else{
                layer.open({
                    skin: 'msg',
                    content: '定位失败，请稍后尝试',
                    time: 1.2
                })
            }
        }
        // 排位距离
        function sortNum(a, b){
            return a.dist - b.dist;
        }
        // 进入 热门店铺
        function intoHotShop(id){
            $.ajax({
                url: 'index_shop_goods',
                type: 'POST',
                dataType: 'JSON',
                data: {
                    'id': id
                },
                success: function(res){
                    alert('success')
                    console.log(res);
                    location.href = 'reservation_detail?store_id='+id;
                },
                error: function(){
                    alert('error')
                    console.log('error');
                }
            })
        }

        // 获取广告
        function getAdvertisment(area){
            $.ajax({
                url: 'advertisement_index',
                type: 'POST',
                dataType: 'JSON',
                data: {
                    'area': area
                },
                success: function(res){
                    console.log('广告',res);
                    if(res.status == 1){
                        var topSwiperStr = '';
                        // 首页轮播图
                        $.each(res.data.home, function(idx, val){
                            if(idx < 5){
                                topSwiperStr += `<div class="swiper-slide">
                                                    <a href="`+(val.url==null?'javascript:;':val.url)+`">
                                                        <img src="uploads/`+val.advert_picture+`">
                                                    </a>
                                                </div>`;
                            }
                        })
                        $('.swiper-wrapper').html('').html(topSwiperStr);
                        mySwiper();
                        // 首页固定广告
                        var indexFixStr = '';
                        indexFixStr += `<a href="`+(res.data.fixed[0].url==null?'javascript:;':res.data.fixed[0].url)+`">
                                            <img src="uploads/`+res.data.fixed[0].advert_picture+`">
                                        </a>`
                        $('.banner').html('').html(indexFixStr);
                        // 活动商家
                        var data = res.data;
                        var hotStr = `<div class="recommend_top">
                                        <a href="reservation_detail?store_id=`+data.hot_one[0].store_id+`&activity=1">
                                            <img src="uploads/`+data.hot_one[0].advert_picture+`">
                                        </a>
                                        <a href="`+(data.hot_two[0].url==null?'javascript:;':data.hot_two[0].url)+`">
                                            <img src="uploads/`+data.hot_two[0].advert_picture+`">
                                        </a>
                                    </div>
                                    <div class="recommend_bottom">
                                        <div class="recommend_bottom_left">
                                            <a href="`+(data.hot_three[0].url==null?'javascript:;':data.hot_three[0].url)+`">
                                                <img src="uploads/`+data.hot_three[0].advert_picture+`">
                                            </a>
                                        </div>
                                        <div class="recommend_bottom_right">
                                            <div class="recommend_bottom_right_one">
                                                <a href="`+(data.hot_four[0].url==null?'javascript:;':data.hot_four[0].url)+`">
                                                    <img src="uploads/`+data.hot_four[0].advert_picture+`">
                                                </a>
                                            </div>
                                            <div class="recommend_bottom_right_two">
                                                <div class="recommend_bottom_right_three">
                                                    <a href="`+(data.hot_five[0].url==null?'javascript:;':data.hot_five[0].url)+`">
                                                        <img src="uploads/`+data.hot_five[0].advert_picture+`">
                                                    </a>
                                                </div>
                                                <div class="recommend_bottom_right_four">
                                                    <a href="`+(data.hot_six[0].url==null?'javascript:;':data.hot_six[0].url)+`">
                                                        <img src="uploads/`+data.hot_six[0].advert_picture+`">
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>`;
                        $('.recommend_goods').html('').html(hotStr);
                    }
                },
                error: function(){
                    console.log('error');
                }
            })
        }
        //设置cookie
        function setCookie(name, value, day) {
            var date = new Date();
            date.setDate(date.getDate() + day);
            document.cookie = name + '=' + value + ';expires=' + date;
        };
        //获取cookie
        function getCookie(name) {
            var reg = RegExp(name + '=([^;]+)');
            var arr = document.cookie.match(reg);
            if (arr) {
                return arr[1];
            } else {
                return '';
            }
        };
        // 删除cookie
        function delCookie(name) {
            setCookie(name, null, -1);
        };
        $('#search').on('focus', function(){
            location.href = 'goods_list';
        })
        // 三级城市
        $(function() {
            function getAddrsArrayById(id) {
                var results = [];
                if (addr_arr[id] != undefined)
                    addr_arr[id].forEach(function(subArr) {
                        results.push({
                            key: subArr[0],
                            val: subArr[1]
                        });
                    });
                else {
                    return;
                }
                return results;
            }        
            function getStartIndexByKeyFromStartArr(startArr, key) {
                var result = 0;
                if (startArr != undefined)
                    startArr.forEach(function(obj, index) {
                        if (obj.key == key) {
                            result = index;
                            return false;
                        }
                    });
                return result;
            }
            //bind the click event for 'input' element
            $("#space-input").click(function() {
                var PROVINCES = [],
                    startCities = [],
                    startDists = [];
                //Province data，shall never change.
                addr_arr[0].forEach(function(prov) {
                    PROVINCES.push({
                        key: prov[0],
                        val: prov[1]
                    });
                });
                //init other data.
                var $input = $(this),
                    dataKey = $input.attr("data-key"),
                    provKey = 1, //default province 北京
                    cityKey = 36, //default city 北京
                    distKey = 37, //default district 北京东城区
                    distStartIndex = 0, //default 0
                    cityStartIndex = 0, //default 0
                    provStartIndex = 0; //default 0

                if (dataKey != "" && dataKey != undefined) {
                    var sArr = dataKey.split("-");
                    if (sArr.length == 3) {
                        provKey = sArr[0];
                        cityKey = sArr[1];
                        distKey = sArr[2];

                    } else if (sArr.length == 2) { //such as 台湾，香港 and the like.
                        provKey = sArr[0];
                        cityKey = sArr[1];
                    }
                    startCities = getAddrsArrayById(provKey);
                    startDists = getAddrsArrayById(cityKey);
                    provStartIndex = getStartIndexByKeyFromStartArr(PROVINCES, provKey);
                    cityStartIndex = getStartIndexByKeyFromStartArr(startCities, cityKey);
                    distStartIndex = getStartIndexByKeyFromStartArr(startDists, distKey);
                }
                var navArr = [{
                    title: "省",
                    id: "scs_items_prov"
                }, {
                    title: "市",
                    id: "scs_items_city"
                }, {
                    title: "区",
                    id: "scs_items_dist"
                }];
                SCS.init({
                    navArr: navArr,
                    onOk: function(selectedKey, selectedValue) {
                        var valueArr = selectedValue.split(' ');
                        getAdvertisment(valueArr.join(','));
                        if(valueArr.length === 1){
                            $('#space-input').text(valueArr[0]);
                        }else{
                            $('#space-input').text(valueArr[2]);
                        }
                        $input.attr("data-key", selectedKey);
                    }
                });
                var distScroller = new SCS.scrollCascadeSelect({
                    el: "#" + navArr[2].id,
                    dataArr: startDists,
                    startIndex: distStartIndex
                });
                var cityScroller = new SCS.scrollCascadeSelect({
                    el: "#" + navArr[1].id,
                    dataArr: startCities,
                    startIndex: cityStartIndex,
                    onChange: function(selectedItem, selectedIndex) {
                        distScroller.render(getAddrsArrayById(selectedItem.key), 0); //re-render distScroller when cityScroller change
                    }
                });
                var provScroller = new SCS.scrollCascadeSelect({
                    el: "#" + navArr[0].id,
                    dataArr: PROVINCES,
                    startIndex: provStartIndex,
                    onChange: function(selectedItem, selectedIndex) { //re-render both cityScroller and distScroller when provScroller change
                        cityScroller.render(getAddrsArrayById(selectedItem.key), 0);
                        distScroller.render(getAddrsArrayById(cityScroller.getSelectedItem().key), 0);
                    }
                });
            });
        });
        // 三级城市end
    </script>
</body>
</html>