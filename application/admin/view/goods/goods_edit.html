{extend name="layout"} {block name="css"}
<link rel="stylesheet" type="text/css" href="__STATIC__/admin/index/common/formSelects-v4.css" />
<style type="text/css">
	body {
		background: #fff;
	}
	
	.layui-form label {
		text-align: left;
	}
	
	.layui-form-label span {
		color: red;
	}
	
	.layui-form {
		width: 98%;
		margin: 0 auto;
		padding-top: 40px;
	}
	
	.layui-input-block {
		min-height: 40px;
	}
	
	.layui-form-item {
		width: 54%;
	}
	#special_content .layui-input-block{
		margin-left: 0px;
	}
	.biaoji .layui-form-radioed span {
		color: #fff;
		background: red;
		width: 33px;
		text-align: center;
		height: 13px;
		line-height: 13px;
		font-size: 9px;
		border-radius: 6px;
	}
	/*.car .layui-unselect{
		display: none !important;
	}*/
	/*.car select{
		    width: 100%;
            height: 38px;
	}
	#city{
		display: block;
	}
	#province{
		display: block;
	}*/
	    table .full {
        width: 60px !important;
        min-width: 0px !important;
    }
    
    table input {
        width: 60px !important;
        min-width: 60px !important;
    }
    
    table .z_photo {
        padding: 0;
    }
    
    table th {
        text-align: center;
    }
    
    table td {
        text-align: center;
        margin: 0 auto;
    }
	
	.err {
		border: solid 1px red;
	}
	.lv1 input{
		height: 30px;
	}
	/* 数据库展现图片样式 */

.img {
	position: relative;
	display: inline-block;
	width: 100px;
}

.imgcontent {
	margin: 10px;
}

.img>i {
	display: inline-block;
	width: 20px;
	position: absolute;
	right: 0;
	top: 0;
}
</style>
<style type="text/css">
	.title {
		height: 50px;
		background: #F2F2F2;
		font-size: 20px;
		line-height: 50px;
		padding-left: 20px;
		font-weight: bold;
	}
	
	.special,
	.general,
	.special .layui-form-item,
	.general .layui-form-item {
		min-width: 100%;
	}
	
	.add-content {
		background: #F2F2F2;
		width: 100%;
	}
	
	.general-kuang {
		border: solid 1px #E4E4E4;
		width: 1000px;
	}
	
	.btus {
		background: #fff;
		border: solid 1px #E4E4E4;
		color: #0099FF;
		width: 141px;
		display: inline-block;
		margin: 10px;
	}
	
	#general-content .layui-form-item {
		width: 100%;
	}
	
	.sky-blue {
		color: #0099FF;
		border: 0;
	}
	
	.bgwhite {
		background: #fff;
	}
	
	.noshow {
		display: none;
	}
	
	.special .layui-form-item {
		width: 100%;
	}
	
	.general .layui-form-item {
		width: 100%;
	}
	
	.special .layui-form-item label {
		width: 10%;
	}
	
	.general .layui-form-item label {
		width: 10%;
	}
	
	.operation-btus {
		width: 60px;
		height: 40px;
		border-radius: 3px;
		color: #fff;
		border: 0;
	}
	
	.btu-delet {
		background: #FF0000;
	}
	
	.btu-cancel {}
	
	.btu-add {
		background: #0099FF;
	}
	
	.num-content {
		overflow: hidden;
	}
	/*#displacement {
		display: block;
	}
	#production{
		display: block;
	}*/
	
	.big_div {
		position: relative;
	}
	
	.delect_img {
		width: 20px;
		height: 20px;
		position: absolute;
		top: 0;
		right: 0;
	}
	table .upimg-div .up-section{
		width: 60px;
		height: 60px;
	}
	table .up-section .close-upimg{
		width: 20px;
		height: 20px;
	}
	table .img-box .upimg-div .z_file{
		width: 60px;
		height: 60px;
	}
	table .z_file .add-img{
		width: 60px;
		height: 60px;
	}
	table .z_photo{
	border: 0;	
	}
	table .img-box{
		margin: 0;
	}
</style>

{/block}

<body>

	{block name="content"}
	<div class="open">

	</div>
	<form class="layui-form" action="{:url('admin/Goods/updata')}" method="post" enctype="multipart/form-data">
		{volist name="goods" id="value"}
		<div class="basic-information title"> 基本信息
		</div>
		<div class="hide futext">
			{$value.goods_text}
		</div>
		<div class="layui-form-item ">
			<label class="layui-form-label"><span>*</span>商品名:</label>
			<div class="layui-input-block">
				<input type="text" name="goods_name" value="{$value.goods_name}" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input err_check" id="goods_name">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">分享描述：</label>
			<div class="layui-input-block">
				<input type="text" name="goods_describe" value="{$value.goods_describe}" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input" id="goods_describe">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label"><span>*</span>商品显示图片</label>
			<div class="layui-input-block">
				<div class="imgcontent">
					<span class="img">
						<img src="__UPLOADS__/{$value.goods_show_images}" width="100%">
						<i class="remove-img" data-id="{$value.id}" data-value="1"><img src="__STATIC__/admin/common/img/a7.png"></i>
					</span>
				</div>
			</div>
			<div class="layui-input-block">
				<div class="img-box full">
					<section class=" img-section">
						<div class="z_photo upimg-div clear">
							<section class="z_file fl">
								<img src="__STATIC__/admin/common/upfile/img/a11.png" class="add-img">
								<input type="file" name="goods_show_images" id="file" class="file" value="" accept="image/jpg,image/jpeg,image/png,image/bmp" data-id="1" />
							</section>
						</div>
					</section>
				</div>
				<aside class="mask works-mask">
					<div class="mask-content">
						<p class="del-p ">您确定要删除作品图片吗？</p>
						<p class="check-p"><span class="del-com wsdel-ok">确定</span><span class="wsdel-no">取消</span></p>
					</div>
				</aside>
				<p style="color:#999999 ; ">建议尺寸：750*750像素</p>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label"><span>*</span>商品图片</label>
			<div class="layui-input-block">
				<div class="imgcontent">

					<span class="img">
						<img src="" width="100%">
						<i class="remove-img" data-id="" data-value="2"><img src="__STATIC__/admin/common/img/a7.png"></i>
                    </span>
					<span class="img">
						<img src="" width="100%">
						<i class="remove-img" data-id="" data-value="2"><img src="__STATIC__/admin/common/img/a7.png"></i>
                    </span>
					<span class="img">
						<img src="" width="100%">
						<i class="remove-img" data-id="" data-value="2"><img src="__STATIC__/admin/common/img/a7.png"></i>
                    </span>
					<span class="img">
						<img src="" width="100%">
						<i class="remove-img" data-id="" data-value="2"><img src="__STATIC__/admin/common/img/a7.png"></i>
                    </span>
					<!-- {volist name="$value.goods_images" id="val"}
                    <span class="img">
						<img src="__UPLOADS__/{$val.goods_images}" width="100%">
						<i class="remove-img" data-id="{$val.id}" data-value="2"><img src="__STATIC__/admin/common/img/a7.png"></i>
                    </span>
                     {/volist} -->
				</div>
			</div>
			<div class="layui-input-block">
				<div class="img-box full">
					<section class=" img-section">
						<div class="z_photo upimg-div clear">
							<section class="z_file fl">
								<img src="__STATIC__/admin/common/upfile/img/a11.png" class="add-img">
								<input type="file" id="files" name="goods_images[]" class="file" value="" data-id="10" accept="image/jpg,image/jpeg,image/png,image/bmp" multiple />
							</section>
						</div>
					</section>
				</div>
				<aside class="mask works-mask">
					<div class="mask-content">
						<p class="del-p ">您确定要删除作品图片吗？</p>
						<p class="check-p"><span class="del-com wsdel-ok">确定</span><span class="wsdel-no">取消</span></p>
					</div>
				</aside>
				<p style="color:#999999; ">建议尺寸：750*480像素，最多上传10张</p>
			</div>
		</div>
		<div class="layui-form-item" style="min-width: 62% !important;">
			<label class="layui-form-label">商品分组：</label>

			<div class="layui-input-inline" style="margin-left: 30px;">
				{if !empty($goods_list)}
				<select name="goods_type_id" id="goods_type_id" lay-filter="goods_type_id">
					<option value="0">请选择</option>
					{volist name="goods_list" id="goods"} {if $value.goods_type_id == $goods.id}
					<option value="{$goods.id}" selected="">{$goods.name}</option>
					{else}
					<option value="{$goods.id}">{$goods.name}</option>
					{/if} {/volist}
				</select> {else}
				<select name="goods_type_id">
					<option value="0">请选择</option>
				</select> {/if}
			</div>
			<div class="layui-input-inline">
				<a href="{:url('admin/Category/add')}" style="line-height: 40px;">新建分类</a>
			</div>
		</div>
		<div class="layui-form-item " style="min-width: 62% !important;">
			<label class="layui-form-label">商品品牌:</label>
			<div class="layui-input-inline" style="margin-left: 30px;">
				{if !empty($goods_brand)}
				<select name="goods_brand_id" lay-filter="goods_brand_id" id="goods_brand_id">
					<option value="0">请选择</option>
					{volist name="goods_brand" id="v"} {if $value.goods_brand_id == $v.id}
					<option value="{$v.id}" selected>{$v.name}</option>
					{else}
					<option value="{$v.id}">{$v.name}</option>
					{/if} {/volist}
				</select> {else}
				<select name="goods_brand_id">
					<option value="0">请选择</option>
				</select> {/if}
			</div>
			<div class="layui-input-inline">
				<a href="{:url('admin/Brand/add')}" style="line-height: 40px;">添加品牌</a>
			</div>

		</div>
		<div class="layui-form-item ">
			<label class="layui-form-label">商品卖点:</label>
			<div class="layui-input-block">
				<textarea rows="10" name="goods_selling" cols="50">{$value.goods_selling}</textarea>
				<div class="tips">*在商品列表页、详情页标题下面展示卖点信息，建议60字以内</div>
			</div>

		</div>
		<div class="layui-form-item ">
			<label class="layui-form-label">商品排序:</label>
			<div class="layui-input-block">
				<input type="text" name="sort_number" value="{$value.sort_number}" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input" id="sort_number">
			</div>
		</div>
		<div class="layui-form-item" class="biaoji">
			<label class="layui-form-label">商品标记：</label>
			<div class="layui-input-block" id="goods_sign">
				<input type="radio" name="goods_sign" value="hot" title="hot" checked="" class="hot">
				<input type="radio" name="goods_sign" value="促销" title="促销" class="">
				<input type="radio" name="goods_sign" value="清仓" title="清仓" class="">
				<input type="radio" name="goods_sign" value="推荐" title="推荐" class="">
			</div>
		</div>
		<div class="basic-information title">商品规格
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">商品规格</label>
			<div class="layui-input-block">
				{if $value.goods_standard == "通用"}
				<input type="radio" name="goods_standard" value="通用" title="通用" class="general-radio" lay-filter="guige" checked="">
				<input type="radio" name="goods_standard" value="专用" title="专用" class="special" lay-filter="guige"> {/if} {if $value.goods_standard == "专用"}
				<input type="radio" name="goods_standard" value="通用" title="通用" class="general-radio" lay-filter="guige">
				<input type="radio" checked="" name="goods_standard" value="专用" title="专用" class="special" lay-filter="guige"> {/if}
			</div>
		</div>
		<div>
			{if $value.goods_standard == "通用"}
			<div class="layui-form-item general ">
				<div class="layui-input-block general-kuang">

					<div id="lv_table_con" class="control-group" style="">
						<label class="control-label">规格项目表</label>
						<div class="controls" style="">
							<div id="lv_table" style="padding: 10px;">
								<table class="table table-bordered">
									<thead>

										<tr>
											<!--//循环这里规格名称-->
											{if !empty($res)} {volist name="res" id="val"}
											<th width="50">
												<input name="lv1" value="{$val}" readonly="" style="border:0;">
											</th>
											{/volist} {/if}

											<!--//循环这里-->
											<th width="100px"><input value="价格（元）" readonly="" style="border:0;"></th>
											<th width="100px"><input value="库存" readonly="" style="border:0;"></th>
											<th width="100px"><input value="规格编码" readonly="" style="border:0;"></th>
											<th width="100px"><input value="成本价" readonly="" style="border:0;"></th>
											<th width="100px"><input value="图片" readonly="" style="border:0;"></th>
											<th width="100px"><input value="开关" readonly="" style="border:0;"></th>
										</tr>

									</thead>
									<tbody>
										{if !empty($goods_standard)} {volist name="goods_standard" id="ve"}
										<!--//规格值循环这里-->
										<tr data-row="1">
											{volist name="$ve['title']" id="vs"}
											<td width="50" rowspan="1" data-rc="1_1">
												<input value="{$vs}" readonly="" style="border:0;">
											</td>
											{/volist}
											<td width="100px"><input type="text" name="sss1521[price]" value="{$ve.price}" data-id="{$ve.id}" data-value="price" class="inputs" required="required"></td>
											<td width="100px"><input type="text" name="sss1521[stock]" value="{$ve.stock}" data-id="{$ve.id}" data-value="stock" class="inputs" required="required"></td>
											<td width="100px"><input type="text" name="sss1521[coding]" value="{$ve.coding}" data-id="{$ve.id}" data-value="coding" class="inputs" required="required"></td>
											<td width="100px"><input type="text" name="sss1521[cost]" value="{$ve.cost}" data-id="{$ve.id}" data-value="cost" class="inputs" required="required"> </td>
											<td width="100px">
												<div class="img-box full">
													<section class=" img-section">
														<div class="z_photo upimg-div clear">
															<section class="up-section fl">
																<span class="up-span"></span><img class="close-upimg" src="/siring_ow/public/static/admin/common/upfile/img/a7.png">
																<!--图片放这里-->

																<img class="up-img" src="__UPLOADS__/{$ve.images}">
																<!--图片放这里-->

																<p class="img-name-p">u4594.png</p><input id="taglocation" name="images" value="__UPLOADS__/{$ve.images}" type="hidden">
																<input id="tags" name="" value="" type="hidden"></section>
															<section class="z_file fl" style="display: none;"> <img src="/teahouse/public/static/admin/common/upfile/img/a11.png" class="add-img">
																<input type="file" name="goods_show_images[]" id="file_0" class="file" value="" accept="image/jpg,image/jpeg,image/png,image/bmp" multiple="" data-id="1" required="required" data-value="images" data-name="{$ve.id}"> </section>

														</div>
													</section>
												</div>
												<aside class="mask works-mask">
													<div class="mask-content">
														<p class="del-p ">您确定要删除作品图片吗？</p>
														<p class="check-p">
															<span class="del-com wsdel-ok list_delet_img" data-id="{$ve.id}" data-value="images">确定</span>
															<span class="wsdel-no">取消</span>
														</p>
													</div>
												</aside>
											</td>
											<td>
												{if $ve.status == 0}
												<input type="checkbox" class="Status" name="status" value="{$ve.status}" lay-skin="switch" lay-text="是|否" lay-filter="isshelves" data-id="{$ve.id}" data-value="status"> {else}
												<input type="checkbox" class="Status" name="status" value="{$ve.status}" lay-skin="switch" lay-text="是|否" lay-filter="isshelves" checked data-id="{$ve.id}" data-value="status"> {/if}
											</td>
										</tr>
										{/volist} {/if}
										<!--//规格值循环这里-->
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>

			</div>
			<div class="layui-form-item special noshow">
				<label class="layui-form-label"></label>
				<div class="layui-input-block general-kuang">
					<div class="layui-form-item car">
						<label class="layui-form-label">适用车型：</label>
						<div class="layui-input-inline">
							<select name="dedicated_vehicle" id="province" lay-filter="province">
								<option value="请选择">请选择</option>
							</select>
						</div>
						<div class="layui-input-inline">
							<select name="goods_car_series" id="city" xm-select-show-count="1" xm-select="city" multiple="multiple">
								<!--<option value="请选择">请选择</option>-->
							</select>
						</div>
						<div class="layui-input-inline">
							<select name="goods_car_displacement" id="displacement" xm-select-show-count="1" xm-select="displacement" multiple="multiple">
								<!--<option value="请选择">请选择</option>-->
							</select>
						</div>
						<div class="layui-input-inline">
							<select name="goods_car_year" id="production" xm-select-show-count="1" xm-select="production" multiple="multiple">
								<!--<option value="请选择">请选择</option>-->
							</select>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">属性</label>
						<div class="layui-input-inline">
							<select name="dedicated_property" class="dedicated_property" lay-filter="dedicated_property">
								<option value="" selected=""></option>
							</select>
						</div>
						<div class="layui-input-inline add-attribute " style="">
							<button type="button" class="sky-blue bgwhite ">+添加属性</button>
						</div>
						<div class="layui-input-inline noshow add-attributes">
							<input type="text" name="" id="" value="" class="add-attribute_input" style="height: 35px;" />
						</div>
						<div class="layui-input-inline noshow add-attributes" style="width: 260px;">
							<button type="button" class="operation-btus btu-delet attributes_delect">删除</button>
							<button type="button" class="operation-btus btu-cancel">取消</button>
							<button type="button" class="operation-btus btu-add shuxingbtu-add">添加</button>
						</div>
					</div>

					<div id="special_content">
					</div>

				</div>
			</div>
			{/if} {if $value.goods_standard == "专用"}
			<div class="layui-form-item general noshow">
				<label class="layui-form-label"></label>
				<div class="layui-input-block general-kuang">
					<div id="general_content">
					</div>

				</div>
			</div>
			<div class="layui-form-item special ">
				<label class="layui-form-label"></label>
				<div class="layui-input-block general-kuang">
					<div class="layui-form-item car">
						<label class="layui-form-label">适用车型：</label>
						<div class="layui-input-inline">
							<select name="dedicated_vehicle" id="province" lay-filter="province">
								{volist name="car_series" id="car"} {if $value.dedicated_vehicle == $car.brand}
								<option value="{$value.dedicated_vehicle}" selected>{$value.dedicated_vehicle}</option>
								{else}
								<option value="{$car.brand}">{$car.brand}</option>
								{/if} {/volist}
							</select>
						</div>
						<div class="layui-input-inline">
							<select name="goods_car_series" id="city" xm-select-show-count="1" xm-select="city" multiple="multiple">
								<!--<option value="请选择"></option>-->
							</select>
						</div>
						<div class="layui-input-inline">
							<select name="goods_car_displacement" id="displacement" xm-select-show-count="1" xm-select="displacement" multiple="multiple">

								<!--<option value="请选择"></option>-->
							</select>
						</div>
						<div class="layui-input-inline">
							<select name="goods_car_year" id="production" xm-select-show-count="1" xm-select="production" multiple="multiple">
								<!--<option value="请选择"></option>-->
							</select>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">属性</label>
						<div class="layui-input-inline">
							<select name="dedicated_property" class="dedicated_property" lay-filter="dedicated_property">

								<option value="" selected="">{$value.dedicated_property}</option>

							</select>
						</div>
						<div class="layui-input-inline add-attribute " style="">
							<button type="button" class="sky-blue bgwhite ">+添加属性</button>
						</div>
						<div class="layui-input-inline noshow add-attributes">
							<input type="text" name="" id="" value="" class="add-attribute_input" style="height: 35px;" />
						</div>
						<div class="layui-input-inline noshow add-attributes">
							<button type="button" class="operation-btus btu-delet attributes_delect">删除</button>
							<button type="button" class="operation-btus btu-cancel">取消</button>
							<button type="button" class="operation-btus btu-add shuxingbtu-add">添加</button>
						</div>
					</div>

					<div id="special_content">
						<div class="layui-input-block general-kuang">

							<div id="lv_table_con" class="control-group" style="">
								<label class="control-label">规格项目表</label>
								<div class="controls" style="">
									<div id="lv_table" style="padding: 10px;">
										<table class="table table-bordered">
											<thead>

												<tr>
													<!--//循环这里规格名称-->
													{if !empty($res)} {volist name="res" id="val"}
													<th width="50">
														<input name="lv1" value="{$val}" readonly="" style="border:0;">
													</th>
													{/volist} {/if}

													<!--//循环这里-->
													<th width="100px"><input value="价格（元）" readonly="" style="border:0;"></th>
													<th width="100px"><input value="库存" readonly="" style="border:0;"></th>
													<th width="100px"><input value="规格编码" readonly="" style="border:0;"></th>
													<th width="100px"><input value="成本价" readonly="" style="border:0;"></th>
													<th width="100px"><input value="图片" readonly="" style="border:0;"></th>
													<th width="100px"><input value="开关" readonly="" style="border:0;"></th>
												</tr>

											</thead>
											<tbody>
												{if !empty($goods_standard)} {volist name="goods_standard" id="ve"}
												<!--//规格值循环这里-->
												<tr data-row="1">
													{volist name="$ve['title']" id="vs"}
													<td width="50" rowspan="1" data-rc="1_1">
														<input value="{$vs}" readonly="" style="border:0;">
													</td>
													{/volist}
													<td width="100px"><input type="text" name="sss1521[price]" value="{$ve.price}" data-id="{$ve.id}" data-value="price" class="inputs" required="required"></td>
													<td width="100px"><input type="text" name="sss1521[stock]" value="{$ve.stock}" data-id="{$ve.id}" data-value="stock" class="inputs" required="required"></td>
													<td width="100px"><input type="text" name="sss1521[coding]" value="{$ve.coding}" data-id="{$ve.id}" data-value="coding" class="inputs" required="required"></td>
													<td width="100px"><input type="text" name="sss1521[cost]" value="{$ve.cost}" data-id="{$ve.id}" data-value="cost" class="inputs" required="required"> </td>
													<td width="100px">
														<div class="img-box full">
															<section class=" img-section">
																<div class="z_photo upimg-div clear">
																	<section class="up-section fl">
																		<span class="up-span"></span><img class="close-upimg" src="/siring_ow/public/static/admin/common/upfile/img/a7.png">
																		<!--图片放这里-->

																		<img class="up-img" src="__UPLOADS__/{$ve.images}">
																		<!--图片放这里-->

																		<p class="img-name-p">u4594.png</p><input id="taglocation" name="images" value="__UPLOADS__/{$ve.images}" type="hidden">
																		<input id="tags" name="" value="" type="hidden"></section>
																	<section class="z_file fl" style="display: none;"> <img src="/teahouse/public/static/admin/common/upfile/img/a11.png" class="add-img">
																		<input type="file" name="goods_show_images[]" id="file_0" class="file" value="" accept="image/jpg,image/jpeg,image/png,image/bmp" multiple="" data-id="1" required="required" data-value="images" data-name="{$ve.id}"> </section>

																</div>
															</section>
														</div>
														<aside class="mask works-mask">
															<div class="mask-content">
																<p class="del-p ">您确定要删除作品图片吗？</p>
																<p class="check-p">
																	<span class="del-com wsdel-ok list_delet_img" data-id="{$ve.id}" data-value="images">确定</span>
																	<span class="wsdel-no">取消</span>
																</p>
															</div>
														</aside>
													</td>
													<td>
														{if $ve.status == 0}
														<input type="checkbox" class="Status" name="status" value="{$ve.status}" lay-skin="switch" lay-text="是|否" lay-filter="isshelves" data-id="{$ve.id}" data-value="status"> {else}
														<input type="checkbox" class="Status" name="status" value="{$ve.status}" lay-skin="switch" lay-text="是|否" lay-filter="isshelves" checked data-id="{$ve.id}" data-value="status"> {/if}
													</td>
												</tr>
												{/volist} {/if}
												<!--//规格值循环这里-->
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>

					</div>

				</div>

			</div>
			{/if}
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label"><span>*</span>规格：</label>
			<div class="layui-input-block">
				<input type="text" value="{$value.standard}" name="standard" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input err_check" id="standard">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">商品编码：</label>
			<div class="layui-input-block">
				<input type="text" name="goods_number" value="{$value.goods_number}" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input" id="goods_number">
				<div class="tips">
					当光标放入文本框中，可支持扫码枪录入编码，不填写系统生成默认
				</div>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label"><span>*</span> 价格：</label>
			<div class="layui-input-block">
				<input type="text" name="goods_new_money" value="{$value.goods_new_money}" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input err_check" id="goods_new_money">
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label">划线价：</label>
			<div class="layui-input-block">
				<input type="text" name="goods_bottom_money" value="{$value.goods_bottom_money}" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input" id="goods_bottom_money">
				<div class="tips">
					商品没有优惠的情况下，划线价在商品详情会以划线形式显示。
				</div>
			</div>
		</div>
		<div class="layui-form-item">
			<label class="layui-form-label"> <span>*</span> 库存：</label>
			<div class="layui-input-block">
				<input type="text" name="goods_repertory" value="{$value.goods_repertory}" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input err_check" id="goods_repertory">
				<div>
					<input type="checkbox" name="" lay-skin="primary" title="商品详情不显示剩余件数">
				</div>
				<div class="tips">库存为0时，会放到[已售罄]的商品列表里，保存后买家看到的商品可售库存同步更新</div>
			</div>

		</div>
		<div class="layui-form-item layui-form-text">
			<label class="layui-form-label">商品描述：</label>
			<div class="layui-input-block">

				<div id="goods_text">
					<script id="editor" type="text/plain" name="goods_text" style="width:800px;height:500px;"></script>
				</div>
			</div>
		</div>
		<div class="basic-information title"> 其他
		</div>
		<div class="layui-form-item" class="biaoji">
			<label class="layui-form-label"><span class="red"></span>上架年限：</label>
			<div class="layui-input-block">
				<select name="goods_year_id">
					{volist name="year" id="v"}
					<option value="{$v.id}">{$v.year}年{$v.money}元/单个商品</option>
					{/volist}
				</select>
			</div>
		</div>
		<div class="layui-form-item" pane="">
			<label class="layui-form-label">限购：</label>
			<div class="layui-input-block">
				<div class="layui-input-inline">
					<input type="checkbox" lay-skin="primary" title="限制每人可购买数量">
				</div>
				<div class="layui-input-inline">
					<input type="text" name="goods_restriction" value="{$value.goods_restriction}" id="" value="" style="margin-right: 10px;" id="goods_restriction" />件
				</div>
			</div>
		</div>
		<!--<div class="layui-form-item" class="biaoji">
            <label class="layui-form-label"><span>*</span>是否上架：</label>
            <div class="layui-input-block" id="goods_sign">
                {if $value.goods_status == 1}
                <input type="radio" name="goods_status" value="{$value.goods_status}" title="上架" checked="" class="hot">
                <input type="radio" name="goods_status" value="0" title="不上架" class=""> {else}
                <input type="radio" name="goods_status" value="1" title="上架" class="hot">
                <input type="radio" name="goods_status" value="{$value.goods_status}" title="不上架" checked=""> {/if}
            </div>
        </div>-->
		<div class="basic-information title"> 配送与安装服务
		</div>
		<div class="layui-form-item" class="biaoji">
			<label class="layui-form-label">配送与安装服务：</label>
			<div class="layui-input-block" id="">

				<input type="checkbox" name="goods_delivery[]" value="到店自提" title="到店自提" checked="" class="hot">
				<input type="checkbox" name="goods_delivery[]" value="上门安装" title="上门安装" class="">
				<input type="checkbox" name="goods_delivery[]" value="无需安装" title="无需安装" class="">
				<input type="checkbox" name="goods_delivery[]" value="到店安装" title="到店安装" class="">

			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-input-block">
				<input type="hidden" name="id" value="{$value.id}">
				<button class="layui-btn submit_btn" lay-submit="" lay-filter="demo1" type="submit">保存</button>
				<button type="button" class="layui-btn layui-btn-primary" onClick="javascript :history.back(-1);"> 返回</button>
			</div>
		</div>
		{/volist}
	</form>

	{/block}

	<!--_footer 作为公共模版分离出去-->
	{include file="template/_footer" /}
	<!--/_footer 作为公共模版分离出去-->

	<!--请在下方写此页面业务相关的脚本-->
	{block name="bottom"}
	<script src="__STATIC__/admin/index/common/formSelects-v4.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		// TODO获取车牌Ajax
		var times_id = new Array();
		var displacements_id = new Array();
		var years_id = new Array();
		$.ajax({
			type: "POST",
			url: "{:url('admin/Goods/add')}",
			data: {},
			dataType: "json",
			success: function(data) {
				var datas = data.data;
				for(var i = 0; i < datas.car_series.length; i++) {
					var series = new Array();
					var displacement = new Array();
					var year = new Array();
					for(var j = 0; j < datas.car_brand.length; j++) {
						if(datas.car_brand[j].brand == datas.car_series[i].brand) {
							series.push({
								"series": datas.car_brand[j].series
							});
							displacement.push({
								"series": datas.car_brand[j].displacement
							});
							year.push({
								"series": datas.car_brand[j].year
							});
						}

					}
					times_id[datas.car_series[i].brand] = series;
					displacements_id[datas.car_series[i].brand] = displacement;
					years_id[datas.car_series[i].brand] = year;
				}

				var city_obj = times_id;
				for(var key in city_obj) {
					$("#province").append("<option value='" + key + "'>" + key + "</option>");
				}

			},
			error: function(data) {
				console.log("错误");
			}
		});

		// 取当前页面名称(不带后缀名)
		function pageName() {
			var a = location.href;
			var b = a.split("/");
			var c = b.slice(b.length - 1, b.length).toString(String).split(".");
			return c.slice(0, 1)[0];
		}

		//   去重函数
		function quchong(arr) {
			var b = [];
			for(var k in arr) {
				if(b.indexOf(arr[k].series) == -1) {
					b.push(arr[k].series);
				}
			}
			return b;
		}
		setTimeout(function() {
			car_qu();
		}, 2000);
		//TODO排量年产等默认赋值
		function car_qu() {
			var city = [];
			var displacement = [];
			var production = [];
			$.ajax({
				type: "POST",
				url: "{:url('admin/Goods/edit_show')}",
				data: {
					id: pageName()
				},
				success: function(data) {
					var data = eval('(' + data + ')');
					for(var i = 0; i < data.data[0].goods_car_series.length; i++) {
						city.push(data.data[0].goods_car_series[i]);
					}
					for(var i = 0; i < data.data[0].goods_car_displacement.length; i++) {

						displacement.push(data.data[0].goods_car_displacement[i]);
					}
					for(var i = 0; i < data.data[0].goods_car_year.length; i++) {

						production.push(data.data[0].goods_car_year[i]);
					}
					console.log(city)

					layui.formSelects.value('city', city);
					layui.formSelects.value('displacement', displacement);
					layui.formSelects.value('production', production);
				},
				error: function(data) {
					console.log(data)
				}
			});
		}

		var formSelects = layui.formSelects;
		layui.config({
			base: "js/"
		}).use(['form', 'layer', 'jquery', 'laypage', 'layedit'], function() {
			var form = layui.form(),
				layedit = layui.layedit,
				layer = parent.layer === undefined ? layui.layer : parent.layer,
				laypage = layui.laypage,
				$ = layui.jquery;
			layedit.build('demo');
			//			价格库存等修改事件
            $(".inputs").change(function() {
                var change_val = $(this).val();
                var location_x = $(this).data("id");
                var location_y = $(this).data("value");
                 if(change_val==''){
                	change_val=0;
                }
                $.ajax({
                    type: "POST",
                    url: "{:url('admin/Goods/value')}",
                    data: {
                        "id": location_x,
                        "value": change_val,
                        "key": location_y,
                    },
                    success: function(data) {
                        data = eval("(" + data + ")");
                        layer.msg(data.info);
                        form.render('select');
                    },
                    error: function(data) {
                        console.log("失败")
                    }
                });
            });
            //			  开关修改事件
            form.on('switch(isshelves)', function(data) {
                if ($(this).val() == 0) {
                    $(this).val(1);
                } else {
                    $(this).val(0);
                }
                var value = data.value;
                if (value == 0) {
                    value = 1;
                } else {
                    value = 0;
                }
                var id = data.elem.dataset.id;

                $.ajax({
                    type: "POST",
                    url: "{:url('admin/Goods/switches')}",
                    data: {
                        "id": id,
                        "status": value,
                    },
                    success: function(data) {
                        layer.msg("修改成功");
                    },
                    error: function(data) {
                        console.log("失败")
                    }
                });

            });
            var phone_delect_id='';
            //          删除图片事件
            $(".list_delet_img").click(function() {
                phone_delect_id = $(this).data("id");
            
            });
                    //			添加图片
            $(".file").change(function() {
                //				alert(111);
                var formData = new FormData();
                var filess = $(this)[0].files[0];
                var id = $(this).data("name");
                formData.append("id", id);
                formData.append("file", filess);
			                $.ajax({
			                    type: "POST",
			                    url: "{:url('admin/Goods/addphoto')}",
			                    processData: false,
			                    contentType: false,
			                    data: formData,
			                    success: function(data) {
			                    	    $.ajax({
			                    type: "POST",
			                    url: "{:url('admin/Goods/photos')}",
			                    data: {
			                        "id": id,
			                    },
			                    success: function(data) {
			                        layer.msg("修改成功");
			                    },
			                    error: function(data) {
			                        console.log("失败")
			                    }
			                });
                    },
                    error: function(data) {
                        console.log("失败")
                    }
                });
            });
            



			// TODO限制分组和品牌
			form.on('select(goods_type_id)', function(data) {

				var value = data.elem.selectedOptions[0].text;
				value = $.trim(value);
				if(value != "请选择") {
					$("#goods_brand_id").val("0");
					form.render();
					$("#goods_brand_id").siblings().addClass("layui-disabled");
					$("#goods_brand_id").siblings().children("layui-anim-upbit").prevObject[0].lastElementChild.remove();

				} else {
					form.render();
				}

			});
			form.on('select(goods_brand_id)', function(data) {
				var value = data.elem.selectedOptions[0].text;
				value = $.trim(value);
				if(value != "请选择") {
					$("#goods_type_id").val("0");
					form.render();
					$("#goods_type_id").siblings().addClass("layui-disabled");
					$("#goods_type_id").siblings().children("layui-anim-upbit").prevObject[0].lastElementChild.remove();

				} else {
					form.render();
				}

			});

			// TODO点击添加页面
			form.on('select(dedicated_property)', function(data) {
				$(".add-attribute_input").val(data.value);
			});

			// TODO专用属性点击删除按钮
			$(".attributes_delect").click(function() {

				var texts = $(".add-attribute_input").val();
				$.ajax({
					type: "POST",
					url: "{:url('admin/Goods/property_name_del')}",
					data: {
						"goods_name": texts
					},
					success: function(data) {
						var data = eval('(' + data + ')');
						layer.msg(data.info);
						if(data.info == "删除成功") {
							$(".dedicated_property option[value='" + texts + "']").remove();
							$(".add-attribute_input").val('');
							form.render('select');
						}
					},
					error: function(data) {
						console.log(data)
					}
				});
			});
			$.ajax({
				type: "POST",
				url: "{:url('admin/Goods/standard_name')}",
				data: {},
				success: function(data) {
					//					console.log(data);
					var data = eval('(' + data + ')');
					for(var i = 0; i < data.data.length; i++) {
						var dhtml = "";
						dhtml = '<option value="' + data.data[i].standard_name + '">' + data.data[i].standard_name + '</option>'
						$(".universal_standard_namea").append(dhtml);
					}

					form.render('select');
				},
				error: function(data) {
					console.log(data)
				}
			});
			form.render('select');
			//		车型开始赋值

			setTimeout(function() {
				car_append();
			}, 1000);

			function car_append() {
				var now_province = $("#province option:selected").text();
				var tim_id = quchong(times_id[now_province]);
				var displacemen_id = quchong(displacements_id[now_province]);
				var year_id = quchong(years_id[now_province]);
				for(var k in tim_id) {
					var now_city = tim_id[k];
					$("#city").append('<option value="' + now_city + '">' + now_city + '</option>');

				}
				for(var k in displacemen_id) {
					var now_displacement = displacemen_id[k];
					$("#displacement").append('<option value="' + now_displacement + '">' + now_displacement + '</option>');
				}
				for(var k in year_id) {
					var now_production = year_id[k];
					$("#production").append('<option value="' + now_production + '">' + now_production + '</option>');
				}
				formSelects.render();
			}

			//	        改变车型时
			form.on('select(province)', function(data) {
				var now_province = data.value;
				$("#city").html('<option value="">请选择车系</option>');
				$("#displacement").html('<option value="">请选择排量</option>');
				$("#production").html('<option value="">请选择年产</option>');
				formSelects.render();
				//								quchong(times_id[now_province])/;
				var num = 0;

				var tim_id = quchong(times_id[now_province]);

				var displacemen_id = quchong(displacements_id[now_province]);
				var year_id = quchong(years_id[now_province]);
				for(var k in tim_id) {
					var now_city = tim_id[k];
					$("#city").append('<option value="' + now_city + '">' + now_city + '</option>');

				}
				for(var k in displacemen_id) {
					var now_displacement = displacemen_id[k];
					$("#displacement").append('<option value="' + now_displacement + '">' + now_displacement + '</option>');
				}
				for(var k in year_id) {
					var now_production = year_id[k];
					$("#production").append('<option value="' + now_production + '">' + now_production + '</option>');
				}
				formSelects.render();

			});

			// 商品规格变化
			form.on('radio(guige)', function(data) {
				var checkval = data.value;
				if(checkval == "通用") {
					$(".general").removeClass("noshow");
					$(".special").addClass("noshow");
				} else {
					$(".special").removeClass("noshow");
					$(".general ").addClass("noshow");
				}

			});
			//TODO点击属性添加按钮
			$(".shuxingbtu-add").on('click', function() {
				var text = $(this).parent().siblings(".add-attributes").children("input").val();
				$.ajax({
					type: "POST",
					url: "{:url('admin/Goods/property_name')}",
					data: {
						"property_name": text
					},
					success: function(data) {
						//						layer.msg(data.info);
						var data = eval('(' + data + ')');
						//						console.log(data)
						layer.msg(data.info);
						if(data.info == "成功") {
							var dhtmls = '<option value="' + data.data[0].property_name + '">' + data.data[0].property_name + '</option> ';
							$(".dedicated_property").append(dhtmls);
							form.render('select');
						}

					},
					error: function(data) {
						console.log(data)
					}
				});

			});

			//TODO点击取消按钮
			$(".btu-cancel").click(function() {
				$(".add-attributes").addClass("noshow");
				$(".add-attribute").removeClass("noshow");
			});

			//TODO点击添加属性出现输入框
			$(".add-attribute").on('click', function() {

				$(this).addClass("noshow");
				$(this).siblings(".add-attributes").removeClass("noshow");
			});

			//TODO属性展现ajax
			$.ajax({
				type: "POST",
				url: "{:url('admin/Goods/property_show')}",
				data: {},
				success: function(data) {
					//						layer.msg(data.info);
					var data = eval('(' + data + ')');
					//					console.log(data.data);
					for(var i = 0; i < data.data.length; i++) {
						var dhtmls = '<option value="' + data.data[i].property_name + '">' + data.data[i].property_name + '</option> ';
						$(".dedicated_property").append(dhtmls);

					}
					form.render('select');

				},
				error: function(data) {
					console.log(data)
				}
			});
			form.render('select');
			// end商品规格变化
		})
		setTimeout(insertHtml, 1000);

		//实例化编辑器
		//建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
		var ue = UE.getEditor('editor');

		function insertHtml() {
			UE.getEditor('editor').execCommand('insertHtml', $(".futext").html())
		}
		// 图片删除
		$(".remove-img").click(function() {
			var remove = $(this).parent();
			var id = $(this).data("id");
			var value = $(this).data("value");
			//			console.log(value)
			//			console.log(id);
			if(value == 1) {
				$.ajax({
					type: "POST",
					url: "{:url('admin/Goods/images')}",
					data: {
						"id": id
					},
					dataType: "json",
					success: function(data) {
						remove.remove();
					},
					error: function(data) {
						console.log("错误");
					}
				});
			} else {
				$.ajax({
					type: "POST",
					url: "{:url('admin/Goods/images')}",
					data: {
						"images_id": id
					},
					dataType: "json",
					success: function(data) {
						remove.remove();
					},
					error: function(data) {
						console.log("错误");
					}
				});
			}
			// 		
		});

		function checks() {
			for(var i = 0; i < $(".err_check").length; i++) {
				if($(".err_check")[i].value == '') {
					alert("证明文件有空没填写");
					return false;
				}
			}
			for(var j = 0; j < $(".files").length; j++) {
				if($(".files")[j].files.length == 0) {
					alert("证明图片有空没填写");
					return false;
				}
			}
			$(".btu").attr("type", "submit");

		}
	</script>

	{/block}

</body>

</html>